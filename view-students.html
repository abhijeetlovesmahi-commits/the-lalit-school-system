<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student List - The Lalit International School</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; padding: 20px; }
        .list-container { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin: auto; }
        .header { color: #2c3e50; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .table thead { background-color: #3498db; color: white; }
    </style>
</head>
<body>

<div class="list-container shadow">
    <div class="header">
        <div>
            <h2>Registered Students</h2>
            <p class="text-muted">Total admissions in the system</p>
        </div>
        <button class="btn btn-outline-primary" onclick="location.reload()">Refresh List</button>
    </div>

    <div class="table-responsive">
        <table class="table table-hover mt-3">
            <thead>
                <tr>
                    <th>Roll No</th>
                    <th>Full Name</th>
                    <th>Class</th>
                    <th>Father's Name</th>
                    <th>Contact</th>
                </tr>
            </thead>
            <tbody id="studentTableBody">
                </tbody>
        </table>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDqDmsMp2eAuHJBcjW-ciO2JcLTXapiIrs",
        authDomain: "the-lalit-d7472.firebaseapp.com",
        databaseURL: "https://the-lalit-d7472-default-rtdb.firebaseio.com",
        projectId: "the-lalit-d7472",
        storageBucket: "the-lalit-d7472.firebasestorage.app",
        messagingSenderId: "479237084229",
        appId: "1:479237084229:web:f1da384b45c5883b12ff2c"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Data Load Karne ka Function
    function loadStudents() {
        const tableBody = document.getElementById('studentTableBody');
        tableBody.innerHTML = "<tr><td colspan='5' class='text-center'>Loading data...</td></tr>";

        db.ref('students').once('value', (snapshot) => {
            tableBody.innerHTML = ""; // Loader hatao
            if (snapshot.exists()) {
                snapshot.forEach((childSnapshot) => {
                    const student = childSnapshot.val();
                    const row = `
                        <tr>
                            <td><b>${student.roll}</b></td>
                            <td>${student.name}</td>
                            <td>Class ${student.class}</td>
                            <td>${student.father}</td>
                            <td>${student.phone}</td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
            } else {
                tableBody.innerHTML = "<tr><td colspan='5' class='text-center'>No students found!</td></tr>";
            }
        });
    }

    // Page khulte hi data load karo
    window.onload = loadStudents;
</script>
</body>
</html>
